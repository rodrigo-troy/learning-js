<!DOCTYPE html>
<html>
<head>
    <title>Constructors explicitly returning object values</title>
    <meta charset="utf-8">
    <script src="assert.js"></script>
    <link rel="stylesheet"
          type="text/css"
          href="assert.css">
</head>
<body>
<script>
    var puppet = {      //Creates our own object with a known property
        rules: false
    };

    function Emperor() {    //Returns that object despite initializing the object passed as this
        console.log("this = " + this);

        this.rules = true;
        return puppet;
    }

    var emperor = new Emperor();  //Invokes the function as a constructor

    assert(emperor === puppet, "The emperor is merely a puppet!");
    assert(emperor.rules === false, "The puppet does not know how to rule!");
</script>
<p>
    Ejemplo extraido del Libro Secrets_of_the_JavaScript_Ninja_Second.pdf - CHAPTER 4.2.3 - Invocation as a constructor
</p>

<ul>
    <li>If the constructor returns an object, that object is returned as the value of the whole new expression, and the
        newly constructed object passed as this to the constructor is discarded.
    </li>
    <li>If, however, a nonobject is returned from the constructor, the returned value is ignored, and the newly created
        object is returned.
    </li>
</ul>
</body>
</html>
